{"abi":[{"type":"function","name":"calculateGainLoss","inputs":[{"name":"token","type":"address","internalType":"address"},{"name":"units","type":"uint256","internalType":"uint256"},{"name":"expectedProceeds","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"costBasis","type":"uint256","internalType":"uint256"},{"name":"realizedGain","type":"int256","internalType":"int256"},{"name":"isLongTerm","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"checkWashSale","inputs":[{"name":"token","type":"address","internalType":"address"}],"outputs":[{"name":"isWashSale","type":"bool","internalType":"bool"},{"name":"recentAcquisitions","type":"uint256","internalType":"uint256"},{"name":"windowStart","type":"uint256","internalType":"uint256"},{"name":"windowEnd","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"packedSelectors","inputs":[],"outputs":[{"name":"","type":"bytes","internalType":"bytes"}],"stateMutability":"pure"},{"type":"function","name":"previewSale","inputs":[{"name":"token","type":"address","internalType":"address"},{"name":"units","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"lotIds","type":"bytes32[]","internalType":"bytes32[]"},{"name":"quantities","type":"uint256[]","internalType":"uint256[]"},{"name":"costBasis","type":"uint256","internalType":"uint256"},{"name":"taxStrategy","type":"uint8","internalType":"uint8"}],"stateMutability":"view"},{"type":"function","name":"sellAsset","inputs":[{"name":"token","type":"address","internalType":"address"},{"name":"units","type":"uint256","internalType":"uint256"},{"name":"buyer","type":"address","internalType":"address"},{"name":"paymentToken","type":"address","internalType":"address"},{"name":"price","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"lotIds","type":"bytes32[]","internalType":"bytes32[]"},{"name":"quantities","type":"uint256[]","internalType":"uint256[]"},{"name":"costBasis","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"event","name":"AssetDisposed","inputs":[{"name":"wallet","type":"address","indexed":true,"internalType":"address"},{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"lotIds","type":"bytes32[]","indexed":false,"internalType":"bytes32[]"},{"name":"quantities","type":"uint256[]","indexed":false,"internalType":"uint256[]"},{"name":"totalUnits","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"counterparty","type":"address","indexed":true,"internalType":"address"},{"name":"paymentToken","type":"address","indexed":false,"internalType":"address"},{"name":"proceeds","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"costBasis","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"taxStrategy","type":"uint8","indexed":false,"internalType":"uint8"},{"name":"disposalType","type":"uint8","indexed":false,"internalType":"enum IAssetDisposal.DisposalType"}],"anonymous":false},{"type":"event","name":"WashSaleDetected","inputs":[{"name":"wallet","type":"address","indexed":true,"internalType":"address"},{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"disallowedLoss","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"windowStart","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"windowEnd","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"recentAcquisitions","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"AccessControl_CallerIsNotAuthorized","inputs":[{"name":"caller","type":"address","internalType":"address"},{"name":"functionSig","type":"bytes4","internalType":"bytes4"}]},{"type":"error","name":"AssetDisposal_InsufficientBalance","inputs":[]},{"type":"error","name":"AssetDisposal_InvalidBuyer","inputs":[]},{"type":"error","name":"AssetDisposal_InvalidPrice","inputs":[]},{"type":"error","name":"AssetDisposal_InvalidToken","inputs":[]},{"type":"error","name":"AssetDisposal_NotInitialized","inputs":[]},{"type":"error","name":"AssetDisposal_PaymentFailed","inputs":[]},{"type":"error","name":"AssetDisposal_TransferFailed","inputs":[]},{"type":"error","name":"SafeERC20FailedOperation","inputs":[{"name":"token","type":"address","internalType":"address"}]}],"bytecode":{"object":"0x6080806040523460155761127d908161001a8239f35b5f80fdfe6080806040526004361015610012575f80fd5b5f358060e01c91826311817f14146108f5575081633e62267c1461086f5781634a236d53146107035781638c6891cc14610156575063a41e056d14610055575f80fd5b346101525760603660031901126101525761006e610a34565b6001600160a01b03811690604435821561014357604051636b8fb8ab60e01b81523060048201526024803590820152925f90849060449082905afa8015610138575f935f91610110575b506100c4908484610e53565b91828203915f841280158285131691841216176100fc576060936100e791610f67565b90604051928352602083015215156040820152f35b634e487b7160e01b5f52601160045260245ffd5b6100c4945061013191503d805f833e6101298183610a7d565b810190610b28565b90936100b8565b6040513d5f823e3d90fd5b638f9bb13d60e01b5f5260045ffd5b5f80fd5b346101525760a03660031901126101525761016f610a34565b602435906044356001600160a01b0381169190829003610152576064356001600160a01b0381169081900361015257608435946001600160e01b0319166101b68133610f19565b156106ed57506001600160a01b0382169283156101435780156106de5785156106cf57604051636b8fb8ab60e01b815230600482015260248101869052905f82604481885afa938415610138575f925f956106ad575b5082511561069e57848361021f92610e53565b9460405197632eff3ef160e11b89523060048a0152602089602481855afa988915610138575f99610662575b505f96875b8751891015610278576102706001916102698b8b610c16565b5190610be0565b980197610250565b90918793928a8c5f5b895181101561034d576102a7866102a28761029c858d610c16565b51610e22565b610e35565b6102b1828c610c16565b51906102bd838b610c16565b51604051926345ee5b2d60e11b845260048401528b602484015260448301525f6064830152608482015260e060a48201525f60e482015261010060c48201525f610104820152602081610124815f8c5af1801561013857610322575b50600101610281565b602090813d8111610346575b6103388183610a7d565b81010312610152578b610319565b503d61032e565b50929196949890935060205f604051828101906323b872dd60e01b82528860248201523060448201528560648201526064815261038b608482610a7d565b519082855af115610138575f513d6106595750803b155b6106475786821061045b575b8760ff6104439a94610451989796947f79703321fe482736208cdc83dc062196a584edb314d4bb8bda89ef1a2e5109bb946104076103f9604051966101008852610100880190610a4a565b86810360208801528b610a4a565b966040860152606085015260808401528960a08401521660c08201525f60e08201528030930390a4604051948594606086526060860190610a4a565b908482036020860152610a4a565b9060408301520390f35b9591969294909362278d0042115f146106405762278cff1942014281116100fc57955b62278d004201988942116100fc57604051630c9a9a8b60e31b8152306004820152965f886024818f5afa978815610138575f9861061c575b505f995f5b8951811015610572578d5f6104d0838d610c16565b51602460405180948193638ce16f8160e01b835260048301525afa908115610138575f91610550575b5061016081015115159081610540575b81610531575b5061051d575b6001016104bb565b9a610529600191610e14565b9b9050610515565b9050606042910151108f61050f565b90508b6060820151101590610509565b61056c91503d805f833e6105648183610a7d565b810190610cbf565b8f6104f9565b50879b7f79703321fe482736208cdc83dc062196a584edb314d4bb8bda89ef1a2e5109bb959894969950908d6104519b6104439f999d60ff9695948f86836105cc575b50505050505094509496979850949a5050506103ae565b6105d591610bd3565b926040519384526020840152604083015260608201527f839d4e4b7dfaa958fa44a312ac3251b8337fd0ee867aec408e01afd3f3cf5e6a60803092a3878f80808f866105b5565b6106399198503d805f833e6106318183610a7d565b810190610bed565b968c6104b6565b5f9561047e565b635274afe760e01b5f5260045260245ffd5b600114156103a2565b9098506020813d602011610696575b8161067e60209383610a7d565b810103126101525761068f90610bc5565b978961024b565b3d9150610671565b633c2fc55760e11b5f5260045ffd5b9094506106c59192503d805f833e6101298183610a7d565b919091938861020c565b631f810ebf60e21b5f5260045ffd5b630831aba160e11b5f5260045ffd5b631d64bc3360e11b5f523360045260245260445ffd5b346101525760203660031901126101525761071c610a34565b6001600160a01b03165f81156101435762278d004211156108685762278cff1942014281116100fc57905b62278d004201918242116100fc57604051630c9a9a8b60e31b81523060048201525f81602481885afa908115610138575f9161084e575b505f5b815181101561082f576107948183610c16565b5160405190638ce16f8160e01b825260048201525f816024818a5afa908115610138575f91610815575b5061016081015115159081610805575b816107f6575b506107e2575b600101610781565b926107ee600191610e14565b9390506107da565b905060604291015110876107d4565b90508360608201511015906107ce565b61082991503d805f833e6105648183610a7d565b876107be565b6080848685604051928015158452602084015260408301526060820152f35b61086291503d805f833e6106318183610a7d565b8561077e565b5f90610747565b34610152575f366003190112610152576040805163a41e056d60e01b60208201908152634a236d5360e01b60248301526304605fc560e21b602883015263231a247360e21b602c8301526010825291906108ca603082610a7d565b8151928391602083525180918160208501528484015e5f828201840152601f01601f19168101030190f35b346101525760403660031901126101525761090e610a34565b906001600160a01b038216801561014357636b8fb8ab60e01b825230600483015260248035908301525f82604481845afa928315610138575f925f94610a0a575b50602061095f8585602494610e53565b9260405192838092632eff3ef160e11b82523060048301525afa908115610138575f916109c4575b5060ff906109b46109a695604051968796608088526080880190610a4a565b908682036020880152610a4a565b9260408501521660608301520390f35b90506020813d602011610a02575b816109df60209383610a7d565b81010312610152576109a6936109b46109f960ff93610bc5565b92505093610987565b3d91506109d2565b602491945061095f9350610a296020913d805f833e6101298183610a7d565b95909450915061094f565b600435906001600160a01b038216820361015257565b90602080835192838152019201905f5b818110610a675750505090565b8251845260209384019390920191600101610a5a565b90601f8019910116810190811067ffffffffffffffff821117610a9f57604052565b634e487b7160e01b5f52604160045260245ffd5b67ffffffffffffffff8111610a9f5760051b60200190565b9080601f83011215610152578151610ae281610ab3565b92610af06040519485610a7d565b81845260208085019260051b82010192831161015257602001905b828210610b185750505090565b8151815260209182019101610b0b565b919060408382031261015257825167ffffffffffffffff81116101525781610b51918501610acb565b9260208101519067ffffffffffffffff821161015257019080601f83011215610152578151610b7f81610ab3565b92610b8d6040519485610a7d565b81845260208085019260051b82010192831161015257602001905b828210610bb55750505090565b8151815260209182019101610ba8565b519060ff8216820361015257565b919082039182116100fc57565b919082018092116100fc57565b9060208282031261015257815167ffffffffffffffff811161015257610c139201610acb565b90565b8051821015610c2a5760209160051b010190565b634e487b7160e01b5f52603260045260245ffd5b51906001600160a01b038216820361015257565b92919267ffffffffffffffff8211610a9f5760405191610c7c601f8201601f191660200184610a7d565b829481845281830111610152578281602093845f96015e010152565b9080601f83011215610152578151610c1392602001610c52565b5190811515820361015257565b6020818303126101525780519067ffffffffffffffff82116101525701906101a08282031261015257604051916101a0830183811067ffffffffffffffff821117610a9f57604052610d1081610c3e565b8352602081015160208401526040810151604084015260608101516060840152610d3c60808201610c3e565b608084015260a081015160a084015260c081015167ffffffffffffffff81116101525782610d6b918301610c98565b60c0840152610d7c60e08201610c3e565b60e0840152610d8e6101008201610bc5565b61010084015261012081015161012084015261014081015167ffffffffffffffff81116101525782610dc1918301610c98565b610140840152610dd46101608201610cb2565b6101608401526101808101519067ffffffffffffffff821161015257019080601f83011215610152578151610e0b92602001610c52565b61018082015290565b5f1981146100fc5760010190565b818102929181159184041417156100fc57565b8115610e3f570490565b634e487b7160e01b5f52601260045260245ffd5b909291925f905f5b8151811015610f1257610e6e8183610c16565b51604051638ce16f8160e01b815260048101919091525f816024816001600160a01b0389165afa908115610138575f91610ef8575b506020810190878251610ebc575b505050600101610e5b565b610eef92610ee18597936040610ed7600198610ee996610c16565b5191015190610e22565b905190610e35565b90610be0565b92905f87610eb1565b610f0c91503d805f833e6105648183610a7d565b5f610ea3565b5050925050565b81610f2391611014565b610f61577f511915e52b7f9e690b9fdc662acaf5600fd3722c87eb951d3abd26e93a784dca5c9060ff8216610f585750505f90565b610c13916111f2565b50600190565b919080511561100e575f19905f5b8151811015610ff657610f888183610c16565b51604051638ce16f8160e01b815260048101919091525f816024816001600160a01b038a165afa8015610138576060915f91610fdc575b500151838110610fd3575b50600101610f75565b92506001610fca565b610ff091503d805f833e6105648183610a7d565b5f610fbf565b50506301e1338091925061100a9042610bd3565b1190565b505f9150565b7fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdac546001600160a01b031680611149575b5060018060a01b0381165f527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdaa60205260405f20549163ffffffff60e01b165f527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdab60205260405f2054908115611105576001600160a01b03165f9081527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdaa602052604090205460011615159182156110fd57505090565b161515919050565b6001600160a01b03165f9081527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdaa602052604090205460011615159150610c139050565b6040805163b700961360e01b81526001600160a01b03841660048201523060248201526001600160e01b03198516604482015291829060649082905afa5f91816111a5575b50156110455761119e575f611045565b5050600190565b9091506040813d6040116111ea575b816111c160409383610a7d565b810103126101525760206111d482610cb2565b91015163ffffffff81160361015257905f61118e565b3d91506111b4565b60ff1690811561119e5763ffffffff60e01b165f527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdab60205260405f2054908115611241576001901b16151590565b50505f9056fea264697066735822122077ab30ddf344634f71861aa593d980cb2c8a98ae576cf4512fc60695d3aaa34e64736f6c634300081e0033","sourceMap":"2785:8951:345:-:0;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x6080806040526004361015610012575f80fd5b5f358060e01c91826311817f14146108f5575081633e62267c1461086f5781634a236d53146107035781638c6891cc14610156575063a41e056d14610055575f80fd5b346101525760603660031901126101525761006e610a34565b6001600160a01b03811690604435821561014357604051636b8fb8ab60e01b81523060048201526024803590820152925f90849060449082905afa8015610138575f935f91610110575b506100c4908484610e53565b91828203915f841280158285131691841216176100fc576060936100e791610f67565b90604051928352602083015215156040820152f35b634e487b7160e01b5f52601160045260245ffd5b6100c4945061013191503d805f833e6101298183610a7d565b810190610b28565b90936100b8565b6040513d5f823e3d90fd5b638f9bb13d60e01b5f5260045ffd5b5f80fd5b346101525760a03660031901126101525761016f610a34565b602435906044356001600160a01b0381169190829003610152576064356001600160a01b0381169081900361015257608435946001600160e01b0319166101b68133610f19565b156106ed57506001600160a01b0382169283156101435780156106de5785156106cf57604051636b8fb8ab60e01b815230600482015260248101869052905f82604481885afa938415610138575f925f956106ad575b5082511561069e57848361021f92610e53565b9460405197632eff3ef160e11b89523060048a0152602089602481855afa988915610138575f99610662575b505f96875b8751891015610278576102706001916102698b8b610c16565b5190610be0565b980197610250565b90918793928a8c5f5b895181101561034d576102a7866102a28761029c858d610c16565b51610e22565b610e35565b6102b1828c610c16565b51906102bd838b610c16565b51604051926345ee5b2d60e11b845260048401528b602484015260448301525f6064830152608482015260e060a48201525f60e482015261010060c48201525f610104820152602081610124815f8c5af1801561013857610322575b50600101610281565b602090813d8111610346575b6103388183610a7d565b81010312610152578b610319565b503d61032e565b50929196949890935060205f604051828101906323b872dd60e01b82528860248201523060448201528560648201526064815261038b608482610a7d565b519082855af115610138575f513d6106595750803b155b6106475786821061045b575b8760ff6104439a94610451989796947f79703321fe482736208cdc83dc062196a584edb314d4bb8bda89ef1a2e5109bb946104076103f9604051966101008852610100880190610a4a565b86810360208801528b610a4a565b966040860152606085015260808401528960a08401521660c08201525f60e08201528030930390a4604051948594606086526060860190610a4a565b908482036020860152610a4a565b9060408301520390f35b9591969294909362278d0042115f146106405762278cff1942014281116100fc57955b62278d004201988942116100fc57604051630c9a9a8b60e31b8152306004820152965f886024818f5afa978815610138575f9861061c575b505f995f5b8951811015610572578d5f6104d0838d610c16565b51602460405180948193638ce16f8160e01b835260048301525afa908115610138575f91610550575b5061016081015115159081610540575b81610531575b5061051d575b6001016104bb565b9a610529600191610e14565b9b9050610515565b9050606042910151108f61050f565b90508b6060820151101590610509565b61056c91503d805f833e6105648183610a7d565b810190610cbf565b8f6104f9565b50879b7f79703321fe482736208cdc83dc062196a584edb314d4bb8bda89ef1a2e5109bb959894969950908d6104519b6104439f999d60ff9695948f86836105cc575b50505050505094509496979850949a5050506103ae565b6105d591610bd3565b926040519384526020840152604083015260608201527f839d4e4b7dfaa958fa44a312ac3251b8337fd0ee867aec408e01afd3f3cf5e6a60803092a3878f80808f866105b5565b6106399198503d805f833e6106318183610a7d565b810190610bed565b968c6104b6565b5f9561047e565b635274afe760e01b5f5260045260245ffd5b600114156103a2565b9098506020813d602011610696575b8161067e60209383610a7d565b810103126101525761068f90610bc5565b978961024b565b3d9150610671565b633c2fc55760e11b5f5260045ffd5b9094506106c59192503d805f833e6101298183610a7d565b919091938861020c565b631f810ebf60e21b5f5260045ffd5b630831aba160e11b5f5260045ffd5b631d64bc3360e11b5f523360045260245260445ffd5b346101525760203660031901126101525761071c610a34565b6001600160a01b03165f81156101435762278d004211156108685762278cff1942014281116100fc57905b62278d004201918242116100fc57604051630c9a9a8b60e31b81523060048201525f81602481885afa908115610138575f9161084e575b505f5b815181101561082f576107948183610c16565b5160405190638ce16f8160e01b825260048201525f816024818a5afa908115610138575f91610815575b5061016081015115159081610805575b816107f6575b506107e2575b600101610781565b926107ee600191610e14565b9390506107da565b905060604291015110876107d4565b90508360608201511015906107ce565b61082991503d805f833e6105648183610a7d565b876107be565b6080848685604051928015158452602084015260408301526060820152f35b61086291503d805f833e6106318183610a7d565b8561077e565b5f90610747565b34610152575f366003190112610152576040805163a41e056d60e01b60208201908152634a236d5360e01b60248301526304605fc560e21b602883015263231a247360e21b602c8301526010825291906108ca603082610a7d565b8151928391602083525180918160208501528484015e5f828201840152601f01601f19168101030190f35b346101525760403660031901126101525761090e610a34565b906001600160a01b038216801561014357636b8fb8ab60e01b825230600483015260248035908301525f82604481845afa928315610138575f925f94610a0a575b50602061095f8585602494610e53565b9260405192838092632eff3ef160e11b82523060048301525afa908115610138575f916109c4575b5060ff906109b46109a695604051968796608088526080880190610a4a565b908682036020880152610a4a565b9260408501521660608301520390f35b90506020813d602011610a02575b816109df60209383610a7d565b81010312610152576109a6936109b46109f960ff93610bc5565b92505093610987565b3d91506109d2565b602491945061095f9350610a296020913d805f833e6101298183610a7d565b95909450915061094f565b600435906001600160a01b038216820361015257565b90602080835192838152019201905f5b818110610a675750505090565b8251845260209384019390920191600101610a5a565b90601f8019910116810190811067ffffffffffffffff821117610a9f57604052565b634e487b7160e01b5f52604160045260245ffd5b67ffffffffffffffff8111610a9f5760051b60200190565b9080601f83011215610152578151610ae281610ab3565b92610af06040519485610a7d565b81845260208085019260051b82010192831161015257602001905b828210610b185750505090565b8151815260209182019101610b0b565b919060408382031261015257825167ffffffffffffffff81116101525781610b51918501610acb565b9260208101519067ffffffffffffffff821161015257019080601f83011215610152578151610b7f81610ab3565b92610b8d6040519485610a7d565b81845260208085019260051b82010192831161015257602001905b828210610bb55750505090565b8151815260209182019101610ba8565b519060ff8216820361015257565b919082039182116100fc57565b919082018092116100fc57565b9060208282031261015257815167ffffffffffffffff811161015257610c139201610acb565b90565b8051821015610c2a5760209160051b010190565b634e487b7160e01b5f52603260045260245ffd5b51906001600160a01b038216820361015257565b92919267ffffffffffffffff8211610a9f5760405191610c7c601f8201601f191660200184610a7d565b829481845281830111610152578281602093845f96015e010152565b9080601f83011215610152578151610c1392602001610c52565b5190811515820361015257565b6020818303126101525780519067ffffffffffffffff82116101525701906101a08282031261015257604051916101a0830183811067ffffffffffffffff821117610a9f57604052610d1081610c3e565b8352602081015160208401526040810151604084015260608101516060840152610d3c60808201610c3e565b608084015260a081015160a084015260c081015167ffffffffffffffff81116101525782610d6b918301610c98565b60c0840152610d7c60e08201610c3e565b60e0840152610d8e6101008201610bc5565b61010084015261012081015161012084015261014081015167ffffffffffffffff81116101525782610dc1918301610c98565b610140840152610dd46101608201610cb2565b6101608401526101808101519067ffffffffffffffff821161015257019080601f83011215610152578151610e0b92602001610c52565b61018082015290565b5f1981146100fc5760010190565b818102929181159184041417156100fc57565b8115610e3f570490565b634e487b7160e01b5f52601260045260245ffd5b909291925f905f5b8151811015610f1257610e6e8183610c16565b51604051638ce16f8160e01b815260048101919091525f816024816001600160a01b0389165afa908115610138575f91610ef8575b506020810190878251610ebc575b505050600101610e5b565b610eef92610ee18597936040610ed7600198610ee996610c16565b5191015190610e22565b905190610e35565b90610be0565b92905f87610eb1565b610f0c91503d805f833e6105648183610a7d565b5f610ea3565b5050925050565b81610f2391611014565b610f61577f511915e52b7f9e690b9fdc662acaf5600fd3722c87eb951d3abd26e93a784dca5c9060ff8216610f585750505f90565b610c13916111f2565b50600190565b919080511561100e575f19905f5b8151811015610ff657610f888183610c16565b51604051638ce16f8160e01b815260048101919091525f816024816001600160a01b038a165afa8015610138576060915f91610fdc575b500151838110610fd3575b50600101610f75565b92506001610fca565b610ff091503d805f833e6105648183610a7d565b5f610fbf565b50506301e1338091925061100a9042610bd3565b1190565b505f9150565b7fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdac546001600160a01b031680611149575b5060018060a01b0381165f527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdaa60205260405f20549163ffffffff60e01b165f527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdab60205260405f2054908115611105576001600160a01b03165f9081527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdaa602052604090205460011615159182156110fd57505090565b161515919050565b6001600160a01b03165f9081527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdaa602052604090205460011615159150610c139050565b6040805163b700961360e01b81526001600160a01b03841660048201523060248201526001600160e01b03198516604482015291829060649082905afa5f91816111a5575b50156110455761119e575f611045565b5050600190565b9091506040813d6040116111ea575b816111c160409383610a7d565b810103126101525760206111d482610cb2565b91015163ffffffff81160361015257905f61118e565b3d91506111b4565b60ff1690811561119e5763ffffffff60e01b165f527fce1c17acaaa67de66e928cd49c8f658667a825223bee6fda99a14908362bcdab60205260405f2054908115611241576001901b16151590565b50505f9056fea264697066735822122077ab30ddf344634f71861aa593d980cb2c8a98ae576cf4512fc60695d3aaa34e64736f6c634300081e0033","sourceMap":"2785:8951:345:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;2785:8951:345;;;;;;:::i;:::-;-1:-1:-1;;;;;2785:8951:345;;;;;6824:19;;6820:60;;2785:8951;;-1:-1:-1;;;6960:59:345;;7006:4;2785:8951;6960:59;;2785:8951;;;;;;;;;-1:-1:-1;;2785:8951:345;;;;;;6960:59;;;;;;2785:8951;;;6960:59;;;2785:8951;7042:46;;;;;;:::i;:::-;2785:8951;;;;;;;;;;;;;;;;;;;;;;7328:33;;;;:::i;:::-;2785:8951;;;;;;;;;;;;;;;;;;3174:7;;;2785:8951;3174:7;;2785:8951;3174:7;2785:8951;;3174:7;6960:59;7042:46;6960:59;;;;;;;2785:8951;6960:59;;;;;;:::i;:::-;;;;;:::i;:::-;;;;;;2785:8951;;;;;;;;;6820:60;6300:28;;;2785:8951;6852:28;2785:8951;;6852:28;2785:8951;;;;;;;;;;-1:-1:-1;;2785:8951:345;;;;;;:::i;:::-;;;;;;-1:-1:-1;;;;;2785:8951:345;;;;;;;;;;;-1:-1:-1;;;;;2785:8951:345;;;;;;;;;;;-1:-1:-1;;;;;;2055:7:117;2017:46;2055:7;2043:10;2017:46;:::i;:::-;2016:47;2012:156;;-1:-1:-1;;;;;;2785:8951:345;;;3617:19;;3613:60;;3687:19;;3683:60;;3757:10;;3753:51;;2785:8951;;-1:-1:-1;;;3901:59:345;;3947:4;2785:8951;3901:59;;2785:8951;;;;;;;;-1:-1:-1;2785:8951:345;;;3901:59;;;;;;;;2785:8951;;;3901:59;;;2785:8951;;;;3975:18;3971:66;;4120:46;;;;;:::i;:::-;2785:8951;;;;;;;4238:47;;3947:4;2785:8951;4238:47;;2785:8951;;4238:47;2785:8951;4238:47;;;;;;;;;2785:8951;4238:47;;;2785:8951;-1:-1:-1;2785:8951:345;;;9876:3;2785:8951;;9853:21;;;;;9895:27;2785:8951;9909:13;;;;;:::i;:::-;3174:7;9895:27;;:::i;:::-;9876:3;3174:7;9838:13;;;9853:21;;;;;;;;2785:8951;9982:3;2785:8951;;9963:17;;;;;10089:41;10090:13;:26;:13;;;;;:::i;:::-;3174:7;10090:26;:::i;:::-;10089:41;:::i;:::-;10245:9;;;;:::i;:::-;3174:7;10303:13;;;;;:::i;:::-;3174:7;2785:8951;;;;;;10177:328;;2785:8951;10177:328;;2785:8951;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;10177:328;;;2785:8951;10177:328;;;;;;;;;9982:3;;2785:8951;3174:7;9948:13;;10177:328;2785:8951;10177:328;;;;;;;;;;;;:::i;:::-;;;2785:8951;;;;10177:328;;;;;;;;9963:17;;;;;;;;;;2785:8951;;;;1797:53:43;;;2785:8951:345;;;;1797:53:43;;;2785:8951:345;1797:53:43;;2785:8951:345;3947:4;2785:8951;;;;;;;;;;1797:53:43;;;2785:8951:345;1797:53:43;;:::i;:::-;7875:421;;;;;;;;;2785:8951:345;7875:421:43;;8310:15;;8328:26;;;:31;8310:68;8306:146;;4569:17:345;;;4565:1075;;8310:68:43;2785:8951:345;;;;;;;;;;5702:275;2785:8951;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3947:4;;5702:275;;;;2785:8951;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;:::i;:::-;;;;;;;;;4565:1075;4676:65;;;;;;;3174:7;4676:15;:29;:65;3174:7;;;;;4676:15;3174:7;4676:15;3174:7;;;;4676:65;;3174:7;4676:15;3174:7;4676:15;;;3174:7;;;2785:8951;;-1:-1:-1;;;4913:45:345;;3947:4;2785:8951;4913:45;;2785:8951;;;;;;;4913:45;;;;;;;2785:8951;4913:45;;;4676:65;4972:30;2785:8951;5022:13;2785:8951;5057:3;2785:8951;;5037:18;;;;;5133:10;2785:8951;5133:10;;;;:::i;:::-;3174:7;2785:8951;;;;;;;;;;5108:36;;2785:8951;5108:36;;2785:8951;5108:36;;;;;;;2785:8951;5108:36;;;5057:3;5166:11;;;;3174:7;2785:8951;;5166:49;;;;5057:3;5166:90;;;5057:3;5162:157;;;5057:3;2785:8951;3174:7;5022:13;;5162:157;5280:20;;2785:8951;5280:20;;:::i;:::-;5162:157;;;;;5166:90;4676:15;;2785:8951;4676:15;5219:19;;3174:7;5219:37;5166:90;;;:49;5181:19;;;2785:8951;5181:19;;3174:7;5181:34;;5166:49;;;5108:36;;;;;;2785:8951;5108:36;;;;;;:::i;:::-;;;;;:::i;:::-;;;;5037:18;;;;5702:275;5037:18;;;;;;;;2785:8951;5037:18;2785:8951;5037:18;;;2785:8951;5037:18;;;;5351:22;;5347:283;;5017:316;4565:1075;;;;;;;;;;;;;;;;;;;;5347:283;5477:17;;;:::i;:::-;2785:8951;;;;;;;;;;;;;;;;;;5517:98;2785:8951;3947:4;5517:98;;5347:283;;;;;;;;4913:45;;;;;;;2785:8951;4913:45;;;;;;:::i;:::-;;;;;:::i;:::-;;;;;4676:65;2785:8951;4676:65;;;8306:146:43;8401:40;;;2785:8951:345;8401:40:43;2785:8951:345;;;;8401:40:43;8310:68;2785:8951:345;8362:16:43;;8310:68;;4238:47:345;;;;2785:8951;4238:47;;2785:8951;4238:47;;;;;;2785:8951;4238:47;;;:::i;:::-;;;2785:8951;;;;;;;:::i;:::-;4238:47;;;;;;;-1:-1:-1;4238:47:345;;3971:66;4002:35;;;2785:8951;4002:35;2785:8951;;4002:35;3901:59;;;;;;;;;;2785:8951;3901:59;;;;;;:::i;:::-;;;;;;;;3753:51;3776:28;;;2785:8951;3776:28;2785:8951;;3776:28;3683:60;3715:28;;;2785:8951;3715:28;2785:8951;;3715:28;2012:156:117;2086:71;;;2785:8951:345;2086:71:117;2043:10;2785:8951:345;;;;;;2086:71:117;2785:8951:345;;;;;;-1:-1:-1;;2785:8951:345;;;;;;:::i;:::-;-1:-1:-1;;;;;2785:8951:345;;7628:19;;7624:60;;3174:7;7709:15;:29;3174:7;;;;;7709:15;3174:7;7709:15;3174:7;;;;7709:65;;3174:7;7709:15;3174:7;7709:15;;;3174:7;;;2785:8951;;-1:-1:-1;;;7923:45:345;;7962:4;2785:8951;7923:45;;2785:8951;-1:-1:-1;2785:8951:345;7923:45;2785:8951;7923:45;;;;;;;;2785:8951;7923:45;;;7709:65;7984:13;2785:8951;8019:3;2785:8951;;7999:18;;;;;8091:10;;;;:::i;:::-;3174:7;2785:8951;;;;;;8066:36;;2785:8951;8066:36;;2785:8951;;8066:36;7923:45;8066:36;;;;;;;;;2785:8951;8066:36;;;8019:3;8210:11;;;;3174:7;2785:8951;;8210:49;;;;8019:3;8210:90;;;8019:3;8206:149;;;8019:3;3174:7;;7984:13;;8206:149;8320:20;;3174:7;8320:20;;:::i;:::-;8206:149;;;;;8210:90;7709:15;;8263:19;7709:15;8263:19;;3174:7;8263:37;8210:90;;;:49;8225:19;;;;;;3174:7;8225:34;;8210:49;;;8066:36;;;;;;2785:8951;8066:36;;;;;;:::i;:::-;;;;7999:18;2785:8951;7999:18;;;2785:8951;;8388:22;;;;2785:8951;;;;;;;;;;;;;;;7923:45;;;;;;2785:8951;7923:45;;;;;;:::i;:::-;;;;7709:65;2785:8951;7709:65;;;2785:8951;;;;;;-1:-1:-1;;2785:8951:345;;;;;;;-1:-1:-1;;;11483:244:345;;;2785:8951;;;-1:-1:-1;;;2785:8951:345;;;;-1:-1:-1;;;2785:8951:345;;;;-1:-1:-1;;;2785:8951:345;;;;11483:244;;;;2785:8951;11483:244;;2785:8951;11483:244;:::i;:::-;2785:8951;;;;;11483:244;2785:8951;;;;;;11483:244;2785:8951;;;;;;;;;;;;;;;;-1:-1:-1;;2785:8951:345;;;;;;;;;;;;;-1:-1:-1;;2785:8951:345;;;;;;:::i;:::-;;-1:-1:-1;;;;;2785:8951:345;;6272:19;;6268:60;;-1:-1:-1;;;6362:59:345;;6408:4;2785:8951;6362:59;;2785:8951;;;;;;;;-1:-1:-1;6362:59:345;2785:8951;6362:59;;;;;;;;;2785:8951;;;6362:59;;;2785:8951;6443:46;2785:8951;6443:46;;;2785:8951;6443:46;;:::i;:::-;2785:8951;;;;;;;;;;6513:47;;6408:4;2785:8951;6513:47;;2785:8951;6513:47;;;;;;;2785:8951;6513:47;;;2785:8951;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;6513:47;;;2785:8951;6513:47;;2785:8951;6513:47;;;;;;2785:8951;6513:47;;;:::i;:::-;;;2785:8951;;;;;;;;;;;:::i;:::-;6513:47;;;;;;;;;-1:-1:-1;6513:47:345;;6362:59;2785:8951;6362:59;;;6443:46;6362:59;;;2785:8951;6362:59;;;2785:8951;6362:59;;;;;;:::i;:::-;;;;-1:-1:-1;6362:59:345;-1:-1:-1;6362:59:345;;2785:8951;;;;-1:-1:-1;;;;;2785:8951:345;;;;;;:::o;:::-;;;;;;;;;;;;;;-1:-1:-1;2785:8951:345;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;11483:244;;2785:8951;;;;;;;;;;;;;;;;:::o;:::-;3174:7;;;-1:-1:-1;2785:8951:345;;;;;-1:-1:-1;2785:8951:345;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;:::o;3174:7::-;;;;;;;;;;:::o;:::-;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;:::i;:::-;;:::o;:::-;2785:8951;;3174:7;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;-1:-1:-1;;;;;2785:8951:345;;;;;;3174:7::o;:::-;;;;;;;;;2785:8951;;;;11483:244;2785:8951;;-1:-1:-1;;2785:8951:345;3174:7;;2785:8951;;:::i;:::-;3174:7;;;;;;;;;;;;;;;;-1:-1:-1;3174:7:345;;2785:8951;;;;3174:7::o;:::-;;;;;;;;;;;;;;;;;:::i;:::-;;2785:8951;;;;3174:7;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;2785:8951;;;3174:7;2785:8951;;;;;3174:7;2785:8951;;;;;;;3174:7;;;:::i;:::-;;;;;;2785:8951;3174:7;;;;2785:8951;3174:7;;2785:8951;;3174:7;;;;;;2785:8951;3174:7;;;;;;;;;:::i;:::-;;;;;;;;2785:8951;3174:7;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;:::i;:::-;;;;;2785:8951;3174:7;;;2785:8951;:::i;:::-;3174:7;;;;;;;2785:8951;3174:7;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;2785:8951;3174:7;;;;;;;;;;;;;:::i;:::-;;;;;;:::o;:::-;-1:-1:-1;;3174:7:345;;;;;;;:::o;2785:8951::-;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;:::o;:::-;3174:7;;;2785:8951;;;;;;;;8746:545;;;;;2785:8951;8936:13;2785:8951;8970:3;2785:8951;;8951:17;;;;;9042:9;;;;:::i;:::-;3174:7;2785:8951;;-1:-1:-1;;;9017:35:345;;;;;2785:8951;;;;-1:-1:-1;2785:8951:345;9017:35;2785:8951;-1:-1:-1;;;;;2785:8951:345;;9017:35;;;;;;;2785:8951;9017:35;;;8970:3;9160:12;3174:7;9160:12;;3174:7;;;;9156:119;;8970:3;;;;3174:7;;8936:13;;9156:119;9196:64;9215:13;:29;:13;;;2785:8951;9215:13;3174:7;9215:13;9214:46;9215:13;;:::i;:::-;3174:7;9231:13;;3174:7;9215:29;;:::i;:::-;3174:7;;9214:46;;:::i;:::-;9196:64;;:::i;:::-;9156:119;;;;;;9017:35;;;;;;2785:8951;9017:35;;;;;;:::i;:::-;;;;8951:17;;;;;;8746:545::o;6382:594:117:-;;6554:27;6382:594;6554:27;:::i;:::-;6550:69;;1422:48;7271:58;2785:8951:345;;;;6766:181:117;;6957:12;;2785:8951:345;6382:594:117;:::o;6766:181::-;6888:48;;;:::i;6550:69::-;6597:11;6604:4;6597:11;:::o;10758:535:345:-;;;2785:8951;;10891:18;10887:36;;-1:-1:-1;;3174:7:345;;11021:3;2785:8951;;11002:17;;;;;11093:9;;;;:::i;:::-;3174:7;2785:8951;;-1:-1:-1;;;11068:35:345;;;;;2785:8951;;;;-1:-1:-1;2785:8951:345;11068:35;2785:8951;-1:-1:-1;;;;;2785:8951:345;;11068:35;;;;;;11121:19;11068:35;2785:8951;11068:35;;;11021:3;11121:19;;3174:7;11121:32;;;11117:103;;11021:3;;3174:7;;10987:13;;11117:103;;-1:-1:-1;3174:7:345;11117:103;;11068:35;;;;;;2785:8951;11068:35;;;;;;:::i;:::-;;;;11002:17;;;3064:8;11002:17;;;11247:28;11002:17;11247:15;:28;:::i;:::-;:39;10758:535;:::o;10887:36::-;-1:-1:-1;2785:8951:345;;-1:-1:-1;10911:12:345:o;4567:1366:117:-;4841:11;2785:8951:345;-1:-1:-1;;;;;2785:8951:345;;4837:462:117;;4567:1366;5375:17;2785:8951:345;;;;;;;;;1176:52:117;2785:8951:345;;;;;;2055:7:117;;;;2785:8951:345;;;5430:15:117;2785:8951:345;;;;;;5644:31:117;;;5640:103;;-1:-1:-1;;;;;2785:8951:345;;;;;1176:52:117;2785:8951:345;;;;;;;8550:47:117;:61;;5839:87;;;;;5832:94;;4567:1366;:::o;5839:87::-;5878:33;:47;;;4567:1366;-1:-1:-1;4567:1366:117:o;5640:103::-;-1:-1:-1;;;;;2785:8951:345;;;;;1176:52:117;2785:8951:345;;;;;;;8550:47:117;:61;;;-1:-1:-1;5698:34:117;;-1:-1:-1;8370:248:117;4837:462;2785:8951:345;;;-1:-1:-1;;;4886:69:117;;-1:-1:-1;;;;;2785:8951:345;;4886:69:117;;;2785:8951:345;4936:4:117;2785:8951:345;;;;-1:-1:-1;;;;;;2785:8951:345;;;;;;;;;4886:69:117;;2785:8951:345;;4886:69:117;;2785:8951:345;;4886:69:117;;;4837:462;4882:407;;4837:462;4882:407;5007:26;;4882:407;4837:462;;5007:26;5022:11;;5029:4;5022:11;:::o;4886:69::-;;;;2785:8951:345;4886:69:117;;2785:8951:345;4886:69:117;;;;;;2785:8951:345;4886:69:117;;;:::i;:::-;;;2785:8951:345;;;;;3174:7;;;:::i;:::-;2785:8951;;;;;;;;;4886:69:117;;;;;;;-1:-1:-1;4886:69:117;;7552:639;2785:8951:345;;7721:26:117;;;7717:68;;2055:7;;;2785:8951:345;;;7891:15:117;2785:8951:345;;;;;;7989:31:117;;;7985:74;;7891:15;2785:8951:345;;8123:47:117;:61;;7552:639;:::o;7985:74::-;8036:12;;2785:8951:345;8036:12:117;:::o","linkReferences":{}},"methodIdentifiers":{"calculateGainLoss(address,uint256,uint256)":"a41e056d","checkWashSale(address)":"4a236d53","packedSelectors()":"3e62267c","previewSale(address,uint256)":"11817f14","sellAsset(address,uint256,address,address,uint256)":"8c6891cc"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"caller\",\"type\":\"address\"},{\"internalType\":\"bytes4\",\"name\":\"functionSig\",\"type\":\"bytes4\"}],\"name\":\"AccessControl_CallerIsNotAuthorized\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AssetDisposal_InsufficientBalance\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AssetDisposal_InvalidBuyer\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AssetDisposal_InvalidPrice\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AssetDisposal_InvalidToken\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AssetDisposal_NotInitialized\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AssetDisposal_PaymentFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AssetDisposal_TransferFailed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"SafeERC20FailedOperation\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"wallet\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32[]\",\"name\":\"lotIds\",\"type\":\"bytes32[]\"},{\"indexed\":false,\"internalType\":\"uint256[]\",\"name\":\"quantities\",\"type\":\"uint256[]\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"totalUnits\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"counterparty\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"paymentToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"proceeds\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"costBasis\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"taxStrategy\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"enum IAssetDisposal.DisposalType\",\"name\":\"disposalType\",\"type\":\"uint8\"}],\"name\":\"AssetDisposed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"wallet\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"disallowedLoss\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"windowStart\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"windowEnd\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"recentAcquisitions\",\"type\":\"uint256\"}],\"name\":\"WashSaleDetected\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"units\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expectedProceeds\",\"type\":\"uint256\"}],\"name\":\"calculateGainLoss\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"costBasis\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"realizedGain\",\"type\":\"int256\"},{\"internalType\":\"bool\",\"name\":\"isLongTerm\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"checkWashSale\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"isWashSale\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"recentAcquisitions\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"windowStart\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"windowEnd\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"packedSelectors\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"units\",\"type\":\"uint256\"}],\"name\":\"previewSale\",\"outputs\":[{\"internalType\":\"bytes32[]\",\"name\":\"lotIds\",\"type\":\"bytes32[]\"},{\"internalType\":\"uint256[]\",\"name\":\"quantities\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256\",\"name\":\"costBasis\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"taxStrategy\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"units\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"buyer\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"paymentToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"}],\"name\":\"sellAsset\",\"outputs\":[{\"internalType\":\"bytes32[]\",\"name\":\"lotIds\",\"type\":\"bytes32[]\"},{\"internalType\":\"uint256[]\",\"name\":\"quantities\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256\",\"name\":\"costBasis\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"CapSign Inc.\",\"details\":\"Enables fund wallets to sell assets with proper lot-based accounting.      Uses the holder's configured tax lot selection strategy (FIFO/LIFO/HIFO/LOFO).      Flow:      1. Fund and buyer agree on terms off-chain      2. Buyer approves fund wallet to pull payment      3. Fund calls sellAsset() - atomic swap executes      4. Lots transferred to buyer, payment pulled to fund      5. AssetDisposed event emitted for subgraph indexing      Capital Gains Calculation:      - Cost basis is calculated from the selected lots      - Proceeds are the payment received      - Gain/Loss = Proceeds - Cost Basis      - Long-term if oldest lot held > 1 year\",\"errors\":{\"AccessControl_CallerIsNotAuthorized(address,bytes4)\":[{\"params\":{\"caller\":\"Address attempting the call\",\"functionSig\":\"Function selector that was called\"}}],\"SafeERC20FailedOperation(address)\":[{\"details\":\"An operation with an ERC-20 token failed.\"}]},\"events\":{\"AssetDisposed(address,address,bytes32[],uint256[],uint256,address,address,uint256,uint256,uint8,uint8)\":{\"params\":{\"costBasis\":\"Total cost basis of disposed lots\",\"counterparty\":\"The buyer/recipient of the tokens\",\"disposalType\":\"Type of disposal (SALE, REDEMPTION, DISTRIBUTION)\",\"lotIds\":\"Array of lot IDs that were disposed\",\"paymentToken\":\"Token received as payment\",\"proceeds\":\"Total proceeds received\",\"quantities\":\"Array of quantities from each lot\",\"taxStrategy\":\"Tax lot selection strategy used (0=FIFO, 1=LIFO, 2=HIFO, 3=LOFO)\",\"token\":\"The token being disposed\",\"totalUnits\":\"Total units disposed\",\"wallet\":\"The wallet disposing of the asset (fund, corporate, trust, or individual)\"}},\"WashSaleDetected(address,address,uint256,uint256,uint256,uint256)\":{\"params\":{\"disallowedLoss\":\"Amount of loss that cannot be deducted\",\"recentAcquisitions\":\"Number of lots acquired within the window\",\"token\":\"The token that was sold\",\"wallet\":\"The wallet that sold at a loss\",\"windowEnd\":\"End of the 61-day wash sale window\",\"windowStart\":\"Start of the 61-day wash sale window\"}}},\"kind\":\"dev\",\"methods\":{\"calculateGainLoss(address,uint256,uint256)\":{\"params\":{\"expectedProceeds\":\"Expected sale proceeds\",\"token\":\"The token to sell\",\"units\":\"Number of units\"},\"returns\":{\"costBasis\":\"Total cost basis\",\"isLongTerm\":\"Whether the oldest lot has been held > 1 year\",\"realizedGain\":\"Proceeds minus cost basis (can be negative for loss)\"}},\"checkWashSale(address)\":{\"details\":\"A wash sale occurs when selling at a loss and acquiring substantially      identical securities within 30 days before or after the sale.\",\"params\":{\"token\":\"The token being sold\"},\"returns\":{\"isWashSale\":\"True if wash sale window has acquisitions\",\"recentAcquisitions\":\"Number of lots acquired in wash window\",\"windowEnd\":\"End of the 61-day window (30 days after now)\",\"windowStart\":\"Start of the 61-day window (30 days before now)\"}},\"packedSelectors()\":{\"details\":\"Each selector is 4 bytes, packed sequentially with no padding      MUST NOT include packedSelectors() itself in the returned selectors      MUST be a pure function (no state access)\",\"returns\":{\"_0\":\"Tightly packed bytes4 selectors\"}},\"previewSale(address,uint256)\":{\"details\":\"Does not execute the sale, just shows what would happen\",\"params\":{\"token\":\"The token to sell\",\"units\":\"Number of units\"},\"returns\":{\"costBasis\":\"Total cost basis\",\"lotIds\":\"Lots that would be selected\",\"quantities\":\"Quantities from each lot\",\"taxStrategy\":\"Current tax strategy (0=FIFO, 1=LIFO, 2=HIFO, 3=LOFO)\"}},\"sellAsset(address,uint256,address,address,uint256)\":{\"details\":\"Buyer must have approved this contract to pull payment.      Uses the fund wallet's configured tax lot selection strategy.\",\"params\":{\"buyer\":\"Address receiving the tokens\",\"paymentToken\":\"Token used for payment (USDC, etc.)\",\"price\":\"Total payment amount\",\"token\":\"The token being sold\",\"units\":\"Number of units to sell\"},\"returns\":{\"costBasis\":\"Total cost basis of sold lots\",\"lotIds\":\"The lot IDs that were sold\",\"quantities\":\"The quantities from each lot\"}}},\"title\":\"AssetDisposalFacet\",\"version\":1},\"userdoc\":{\"errors\":{\"AccessControl_CallerIsNotAuthorized(address,bytes4)\":[{\"notice\":\"Thrown when caller lacks required permissions\"}]},\"events\":{\"AssetDisposed(address,address,bytes32[],uint256[],uint256,address,address,uint256,uint256,uint8,uint8)\":{\"notice\":\"Emitted when an asset is disposed (sold, redeemed, or distributed)\"},\"WashSaleDetected(address,address,uint256,uint256,uint256,uint256)\":{\"notice\":\"Emitted when a wash sale is detected (loss disallowed)\"}},\"kind\":\"user\",\"methods\":{\"calculateGainLoss(address,uint256,uint256)\":{\"notice\":\"Get the realized gain/loss for a potential sale\"},\"checkWashSale(address)\":{\"notice\":\"Check if a sale would trigger wash sale rules\"},\"packedSelectors()\":{\"notice\":\"Returns all function selectors for this facet as tightly packed bytes\"},\"previewSale(address,uint256)\":{\"notice\":\"Preview what lots would be sold (view function for UI)\"},\"sellAsset(address,uint256,address,address,uint256)\":{\"notice\":\"Execute atomic sale to a buyer\"}},\"notice\":\"Asset disposal management for investment funds with capital gains tracking\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"packages/wallets/src/facets/capital/AssetDisposalFacet.sol\":\"AssetDisposalFacet\"},\"evmVersion\":\"prague\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@account-abstraction/contracts/=lib/account-abstraction/contracts/\",\":@diamonds/=packages/diamonds/\",\":@ensdomains/=lib/v4-core/node_modules/@ensdomains/\",\":@escrows/=packages/escrows/\",\":@offerings/=packages/offerings/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":@paymaster/=packages/paymaster/\",\":@tokens/=packages/tokens/\",\":@uniswap/v4-core/=lib/v4-periphery/lib/v4-core/\",\":@wallets/=packages/wallets/\",\":FreshCryptoLib/=lib/FreshCryptoLib/solidity/src/\",\":account-abstraction/=lib/account-abstraction/contracts/\",\":diamonds-src/=packages/diamonds/src/\",\":diamonds/=packages/diamonds/interfaces/\",\":ds-test/=lib/v4-core/lib/forge-std/lib/ds-test/src/\",\":eas-contracts/=lib/eas-contracts/contracts/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":escrows-src/=packages/escrows/src/\",\":escrows/=packages/escrows/interfaces/\",\":forge-gas-snapshot/=lib/v4-periphery/lib/permit2/lib/forge-gas-snapshot/src/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/\",\":hardhat/=lib/v4-core/node_modules/hardhat/\",\":offerings-src/=packages/offerings/src/\",\":offerings/=packages/offerings/interfaces/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":paymaster-src/=packages/paymaster/src/\",\":paymaster/=packages/paymaster/interfaces/\",\":permit2/=lib/v4-periphery/lib/permit2/\",\":solady/=lib/solady/src/\",\":solmate/=lib/v4-core/lib/solmate/\",\":tokens-src/=packages/tokens/src/\",\":tokens/=packages/tokens/interfaces/\",\":v4-core/=lib/v4-core/src/\",\":v4-periphery/=lib/v4-periphery/src/\",\":wallets-src/=packages/wallets/src/\",\":wallets/=packages/wallets/interfaces/\",\":webauthn-sol/=lib/webauthn-sol/src/\"],\"viaIR\":true},\"sources\":{\"lib/openzeppelin-contracts/contracts/access/manager/IAccessManager.sol\":{\"keccak256\":\"0x9be2d08a326515805bc9cf6315b7953f8d1ebe88abf48c2d645fb1fa8211a0e2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://e750d656e37efaefbb2300051ec2c4c725db266c5ff89bc985f7ecb8d214c4f4\",\"dweb:/ipfs/QmT51FsZes2n2nrLLh3d8YkBYKY43CtwScZxixcLGzL9r6\"]},\"lib/openzeppelin-contracts/contracts/interfaces/IERC1363.sol\":{\"keccak256\":\"0x9b6b3e7803bc5f2f8cd7ad57db8ac1def61a9930a5a3107df4882e028a9605d7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://da62d6be1f5c6edf577f0cb45666a8aa9c2086a4bac87d95d65f02e2f4c36a4b\",\"dweb:/ipfs/QmNkpvBpoCMvX8JwAFNSc5XxJ2q5BXJpL5L1txb4QkqVFF\"]},\"lib/openzeppelin-contracts/contracts/interfaces/IERC165.sol\":{\"keccak256\":\"0xde7e9fd9aee8d4f40772f96bb3b58836cbc6dfc0227014a061947f8821ea9724\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://11fea9f8bc98949ac6709f0c1699db7430d2948137aa94d5a9e95a91f61a710a\",\"dweb:/ipfs/QmQdfRXxQjwP6yn3DVo1GHPpriKNcFghSPi94Z1oKEFUNS\"]},\"lib/openzeppelin-contracts/contracts/interfaces/IERC20.sol\":{\"keccak256\":\"0xce41876e78d1badc0512229b4d14e4daf83bc1003d7f83978d18e0e56f965b9c\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a2608291cb038b388d80b79a06b6118a42f7894ff67b7da10ec0dbbf5b2973ba\",\"dweb:/ipfs/QmWohqcBLbcxmA4eGPhZDXe5RYMMEEpFq22nfkaUMvTfw1\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db\",\"dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol\":{\"keccak256\":\"0xca2ae13e0610f6a99238dd00b97bd786bc92732dae6d6b9d61f573ec51018310\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://75f8c71ce0c91c40dd5f249ace0b7d8270f8f1767231bcf71490f7157d6ba862\",\"dweb:/ipfs/QmYXgxeDyFHvz3JsXxLEYN6GNUR44ThHeFj5XkpkgMoG4w\"]},\"lib/openzeppelin-contracts/contracts/utils/Address.sol\":{\"keccak256\":\"0x9d8da059267bac779a2dbbb9a26c2acf00ca83085e105d62d5d4ef96054a47f5\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c78e2aa4313323cecd1ef12a8d6265b96beee1a199923abf55d9a2a9e291ad23\",\"dweb:/ipfs/QmUTs2KStXucZezzFo3EYeqYu47utu56qrF7jj1Gue65vb\"]},\"lib/openzeppelin-contracts/contracts/utils/Errors.sol\":{\"keccak256\":\"0x6afa713bfd42cf0f7656efa91201007ac465e42049d7de1d50753a373648c123\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://ba1d02f4847670a1b83dec9f7d37f0b0418d6043447b69f3a29a5f9efc547fcf\",\"dweb:/ipfs/QmQ7iH2keLNUKgq2xSWcRmuBE5eZ3F5whYAkAGzCNNoEWB\"]},\"lib/openzeppelin-contracts/contracts/utils/Panic.sol\":{\"keccak256\":\"0xf7fe324703a64fc51702311dc51562d5cb1497734f074e4f483bfb6717572d7a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c6a5ff4f9fd8649b7ee20800b7fa387d3465bd77cf20c2d1068cd5c98e1ed57a\",\"dweb:/ipfs/QmVSaVJf9FXFhdYEYeCEfjMVHrxDh5qL4CGkxdMWpQCrqG\"]},\"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621\",\"dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL\"]},\"lib/openzeppelin-contracts/contracts/utils/math/Math.sol\":{\"keccak256\":\"0xa00be322d7db5786750ce0ac7e2f5b633ac30a5ed5fa1ced1e74acfc19acecea\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6c84e822f87cbdc4082533b626667b6928715bb2b1e8e7eb96954cebb9e38c8d\",\"dweb:/ipfs/QmZmy9dgxLTerBAQDuuHqbL6EpgRxddqgv5KmwpXYVbKz1\"]},\"lib/openzeppelin-contracts/contracts/utils/math/SafeCast.sol\":{\"keccak256\":\"0x195533c86d0ef72bcc06456a4f66a9b941f38eb403739b00f21fd7c1abd1ae54\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b1d578337048cad08c1c03041cca5978eff5428aa130c781b271ad9e5566e1f8\",\"dweb:/ipfs/QmPFKL2r9CBsMwmUqqdcFPfHZB2qcs9g1HDrPxzWSxomvy\"]},\"lib/openzeppelin-contracts/contracts/utils/types/Time.sol\":{\"keccak256\":\"0x36776530f012618bc7526ceb28e77b85e582cb12d9b9466a71d4bd6bf952e4cc\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://9f867d046908497287d8a67643dd5d7e38c4027af4ab0a74ffbe1d6790c383c6\",\"dweb:/ipfs/QmQ7s9gMP1nkwThFmoDifnGgpUMsMe5q5ZrAxGDsNnRGza\"]},\"packages/diamonds/interfaces/IAccessControl.sol\":{\"keccak256\":\"0xd44a9cecc8fbdc3ceef274a0a9fe061641569a684b2b0af3ad8f9f371c147f00\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://afe2b4fa832bd406b3f0dc59c3b5ddc5c8eac66524b4fe2f8dce3fa7e480a0a5\",\"dweb:/ipfs/QmeYi6MttygfszQ5iXvHARFwpy7MqfqxTBisD6opNimf8W\"]},\"packages/diamonds/interfaces/IFacetIntrospection.sol\":{\"keccak256\":\"0x20b90272b83e14e26320d8f062c17cee50fd9531b1cc35d5f763517e717774c3\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://2f09a6a6d80b942188cfbad1b83964d4be5de525bc1c3f8c2df5412718782cb4\",\"dweb:/ipfs/QmbFSp5aBWsuTmZqs7L7dkHrfCVe6kWZuheBo9Cu99Ci6t\"]},\"packages/diamonds/src/AccessControl.sol\":{\"keccak256\":\"0x57b1248e63762c09e53a78558cfbf24c6cdf7c4946f236e1026d3a188ef931c1\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://7acd085dea00f018f3570149801e411d56d398ee386bf34700070c5dfcbe5153\",\"dweb:/ipfs/QmPTd8QcEoyrzLGUFHyn7ow19XXFRSsGWJ9XSiMYYeaatv\"]},\"packages/tokens/interfaces/token/IToken.sol\":{\"keccak256\":\"0x40f9963ee767737a8e79e02e304525c7d2b96edfde932ca0cfc6afe8b7db0d00\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://d60c51dcafae97b5d632f76164c64346ee8349085d4e15ba2a8531e5f2f1c830\",\"dweb:/ipfs/Qmc2t4g3KtmfZqRa6XpW6V4qD7afCedXfXpP1znTM2cpEy\"]},\"packages/wallets/interfaces/capital/IAssetDisposal.sol\":{\"keccak256\":\"0xc4ca7cef4699bc97ffd95b0a6079ec25175473ffe11e06993603fe0b19a7c744\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://b82672108e5ca3bade97206492948eee1fc7f4e05084f6681782cacf04ab039c\",\"dweb:/ipfs/QmebgMzZAuFHWUHbygHNw64H5rW5ydW14ibHnk1gjNkspQ\"]},\"packages/wallets/src/facets/capital/AssetDisposalFacet.sol\":{\"keccak256\":\"0x3819bd04006a8627100fdc0bfba10ea7d145e94946ec1ecda9c804effe0e259b\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://1a0ef8d00ca9af6d085ee0a1b5d7f9f4b8393d24b9798d8d7b3dc2692465a077\",\"dweb:/ipfs/QmdXoKk8uFWeiHW9hZxNdf9qACLKNzmQeeri4nmBLkJEkN\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.30+commit.73712a01"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"caller","type":"address"},{"internalType":"bytes4","name":"functionSig","type":"bytes4"}],"type":"error","name":"AccessControl_CallerIsNotAuthorized"},{"inputs":[],"type":"error","name":"AssetDisposal_InsufficientBalance"},{"inputs":[],"type":"error","name":"AssetDisposal_InvalidBuyer"},{"inputs":[],"type":"error","name":"AssetDisposal_InvalidPrice"},{"inputs":[],"type":"error","name":"AssetDisposal_InvalidToken"},{"inputs":[],"type":"error","name":"AssetDisposal_NotInitialized"},{"inputs":[],"type":"error","name":"AssetDisposal_PaymentFailed"},{"inputs":[],"type":"error","name":"AssetDisposal_TransferFailed"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"type":"error","name":"SafeERC20FailedOperation"},{"inputs":[{"internalType":"address","name":"wallet","type":"address","indexed":true},{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"bytes32[]","name":"lotIds","type":"bytes32[]","indexed":false},{"internalType":"uint256[]","name":"quantities","type":"uint256[]","indexed":false},{"internalType":"uint256","name":"totalUnits","type":"uint256","indexed":false},{"internalType":"address","name":"counterparty","type":"address","indexed":true},{"internalType":"address","name":"paymentToken","type":"address","indexed":false},{"internalType":"uint256","name":"proceeds","type":"uint256","indexed":false},{"internalType":"uint256","name":"costBasis","type":"uint256","indexed":false},{"internalType":"uint8","name":"taxStrategy","type":"uint8","indexed":false},{"internalType":"enum IAssetDisposal.DisposalType","name":"disposalType","type":"uint8","indexed":false}],"type":"event","name":"AssetDisposed","anonymous":false},{"inputs":[{"internalType":"address","name":"wallet","type":"address","indexed":true},{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"uint256","name":"disallowedLoss","type":"uint256","indexed":false},{"internalType":"uint256","name":"windowStart","type":"uint256","indexed":false},{"internalType":"uint256","name":"windowEnd","type":"uint256","indexed":false},{"internalType":"uint256","name":"recentAcquisitions","type":"uint256","indexed":false}],"type":"event","name":"WashSaleDetected","anonymous":false},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"units","type":"uint256"},{"internalType":"uint256","name":"expectedProceeds","type":"uint256"}],"stateMutability":"view","type":"function","name":"calculateGainLoss","outputs":[{"internalType":"uint256","name":"costBasis","type":"uint256"},{"internalType":"int256","name":"realizedGain","type":"int256"},{"internalType":"bool","name":"isLongTerm","type":"bool"}]},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"stateMutability":"view","type":"function","name":"checkWashSale","outputs":[{"internalType":"bool","name":"isWashSale","type":"bool"},{"internalType":"uint256","name":"recentAcquisitions","type":"uint256"},{"internalType":"uint256","name":"windowStart","type":"uint256"},{"internalType":"uint256","name":"windowEnd","type":"uint256"}]},{"inputs":[],"stateMutability":"pure","type":"function","name":"packedSelectors","outputs":[{"internalType":"bytes","name":"","type":"bytes"}]},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"units","type":"uint256"}],"stateMutability":"view","type":"function","name":"previewSale","outputs":[{"internalType":"bytes32[]","name":"lotIds","type":"bytes32[]"},{"internalType":"uint256[]","name":"quantities","type":"uint256[]"},{"internalType":"uint256","name":"costBasis","type":"uint256"},{"internalType":"uint8","name":"taxStrategy","type":"uint8"}]},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"units","type":"uint256"},{"internalType":"address","name":"buyer","type":"address"},{"internalType":"address","name":"paymentToken","type":"address"},{"internalType":"uint256","name":"price","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"sellAsset","outputs":[{"internalType":"bytes32[]","name":"lotIds","type":"bytes32[]"},{"internalType":"uint256[]","name":"quantities","type":"uint256[]"},{"internalType":"uint256","name":"costBasis","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{"calculateGainLoss(address,uint256,uint256)":{"params":{"expectedProceeds":"Expected sale proceeds","token":"The token to sell","units":"Number of units"},"returns":{"costBasis":"Total cost basis","isLongTerm":"Whether the oldest lot has been held > 1 year","realizedGain":"Proceeds minus cost basis (can be negative for loss)"}},"checkWashSale(address)":{"details":"A wash sale occurs when selling at a loss and acquiring substantially      identical securities within 30 days before or after the sale.","params":{"token":"The token being sold"},"returns":{"isWashSale":"True if wash sale window has acquisitions","recentAcquisitions":"Number of lots acquired in wash window","windowEnd":"End of the 61-day window (30 days after now)","windowStart":"Start of the 61-day window (30 days before now)"}},"packedSelectors()":{"details":"Each selector is 4 bytes, packed sequentially with no padding      MUST NOT include packedSelectors() itself in the returned selectors      MUST be a pure function (no state access)","returns":{"_0":"Tightly packed bytes4 selectors"}},"previewSale(address,uint256)":{"details":"Does not execute the sale, just shows what would happen","params":{"token":"The token to sell","units":"Number of units"},"returns":{"costBasis":"Total cost basis","lotIds":"Lots that would be selected","quantities":"Quantities from each lot","taxStrategy":"Current tax strategy (0=FIFO, 1=LIFO, 2=HIFO, 3=LOFO)"}},"sellAsset(address,uint256,address,address,uint256)":{"details":"Buyer must have approved this contract to pull payment.      Uses the fund wallet's configured tax lot selection strategy.","params":{"buyer":"Address receiving the tokens","paymentToken":"Token used for payment (USDC, etc.)","price":"Total payment amount","token":"The token being sold","units":"Number of units to sell"},"returns":{"costBasis":"Total cost basis of sold lots","lotIds":"The lot IDs that were sold","quantities":"The quantities from each lot"}}},"version":1},"userdoc":{"kind":"user","methods":{"calculateGainLoss(address,uint256,uint256)":{"notice":"Get the realized gain/loss for a potential sale"},"checkWashSale(address)":{"notice":"Check if a sale would trigger wash sale rules"},"packedSelectors()":{"notice":"Returns all function selectors for this facet as tightly packed bytes"},"previewSale(address,uint256)":{"notice":"Preview what lots would be sold (view function for UI)"},"sellAsset(address,uint256,address,address,uint256)":{"notice":"Execute atomic sale to a buyer"}},"version":1}},"settings":{"remappings":["@account-abstraction/contracts/=lib/account-abstraction/contracts/","@diamonds/=packages/diamonds/","@ensdomains/=lib/v4-core/node_modules/@ensdomains/","@escrows/=packages/escrows/","@offerings/=packages/offerings/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","@paymaster/=packages/paymaster/","@tokens/=packages/tokens/","@uniswap/v4-core/=lib/v4-periphery/lib/v4-core/","@wallets/=packages/wallets/","FreshCryptoLib/=lib/FreshCryptoLib/solidity/src/","account-abstraction/=lib/account-abstraction/contracts/","diamonds-src/=packages/diamonds/src/","diamonds/=packages/diamonds/interfaces/","ds-test/=lib/v4-core/lib/forge-std/lib/ds-test/src/","eas-contracts/=lib/eas-contracts/contracts/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","escrows-src/=packages/escrows/src/","escrows/=packages/escrows/interfaces/","forge-gas-snapshot/=lib/v4-periphery/lib/permit2/lib/forge-gas-snapshot/src/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/","hardhat/=lib/v4-core/node_modules/hardhat/","offerings-src/=packages/offerings/src/","offerings/=packages/offerings/interfaces/","openzeppelin-contracts/=lib/openzeppelin-contracts/","paymaster-src/=packages/paymaster/src/","paymaster/=packages/paymaster/interfaces/","permit2/=lib/v4-periphery/lib/permit2/","solady/=lib/solady/src/","solmate/=lib/v4-core/lib/solmate/","tokens-src/=packages/tokens/src/","tokens/=packages/tokens/interfaces/","v4-core/=lib/v4-core/src/","v4-periphery/=lib/v4-periphery/src/","wallets-src/=packages/wallets/src/","wallets/=packages/wallets/interfaces/","webauthn-sol/=lib/webauthn-sol/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"packages/wallets/src/facets/capital/AssetDisposalFacet.sol":"AssetDisposalFacet"},"evmVersion":"prague","libraries":{},"viaIR":true},"sources":{"lib/openzeppelin-contracts/contracts/access/manager/IAccessManager.sol":{"keccak256":"0x9be2d08a326515805bc9cf6315b7953f8d1ebe88abf48c2d645fb1fa8211a0e2","urls":["bzz-raw://e750d656e37efaefbb2300051ec2c4c725db266c5ff89bc985f7ecb8d214c4f4","dweb:/ipfs/QmT51FsZes2n2nrLLh3d8YkBYKY43CtwScZxixcLGzL9r6"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/interfaces/IERC1363.sol":{"keccak256":"0x9b6b3e7803bc5f2f8cd7ad57db8ac1def61a9930a5a3107df4882e028a9605d7","urls":["bzz-raw://da62d6be1f5c6edf577f0cb45666a8aa9c2086a4bac87d95d65f02e2f4c36a4b","dweb:/ipfs/QmNkpvBpoCMvX8JwAFNSc5XxJ2q5BXJpL5L1txb4QkqVFF"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/interfaces/IERC165.sol":{"keccak256":"0xde7e9fd9aee8d4f40772f96bb3b58836cbc6dfc0227014a061947f8821ea9724","urls":["bzz-raw://11fea9f8bc98949ac6709f0c1699db7430d2948137aa94d5a9e95a91f61a710a","dweb:/ipfs/QmQdfRXxQjwP6yn3DVo1GHPpriKNcFghSPi94Z1oKEFUNS"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/interfaces/IERC20.sol":{"keccak256":"0xce41876e78d1badc0512229b4d14e4daf83bc1003d7f83978d18e0e56f965b9c","urls":["bzz-raw://a2608291cb038b388d80b79a06b6118a42f7894ff67b7da10ec0dbbf5b2973ba","dweb:/ipfs/QmWohqcBLbcxmA4eGPhZDXe5RYMMEEpFq22nfkaUMvTfw1"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7","urls":["bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db","dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol":{"keccak256":"0xca2ae13e0610f6a99238dd00b97bd786bc92732dae6d6b9d61f573ec51018310","urls":["bzz-raw://75f8c71ce0c91c40dd5f249ace0b7d8270f8f1767231bcf71490f7157d6ba862","dweb:/ipfs/QmYXgxeDyFHvz3JsXxLEYN6GNUR44ThHeFj5XkpkgMoG4w"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Address.sol":{"keccak256":"0x9d8da059267bac779a2dbbb9a26c2acf00ca83085e105d62d5d4ef96054a47f5","urls":["bzz-raw://c78e2aa4313323cecd1ef12a8d6265b96beee1a199923abf55d9a2a9e291ad23","dweb:/ipfs/QmUTs2KStXucZezzFo3EYeqYu47utu56qrF7jj1Gue65vb"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Errors.sol":{"keccak256":"0x6afa713bfd42cf0f7656efa91201007ac465e42049d7de1d50753a373648c123","urls":["bzz-raw://ba1d02f4847670a1b83dec9f7d37f0b0418d6043447b69f3a29a5f9efc547fcf","dweb:/ipfs/QmQ7iH2keLNUKgq2xSWcRmuBE5eZ3F5whYAkAGzCNNoEWB"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Panic.sol":{"keccak256":"0xf7fe324703a64fc51702311dc51562d5cb1497734f074e4f483bfb6717572d7a","urls":["bzz-raw://c6a5ff4f9fd8649b7ee20800b7fa387d3465bd77cf20c2d1068cd5c98e1ed57a","dweb:/ipfs/QmVSaVJf9FXFhdYEYeCEfjMVHrxDh5qL4CGkxdMWpQCrqG"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol":{"keccak256":"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8","urls":["bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621","dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/math/Math.sol":{"keccak256":"0xa00be322d7db5786750ce0ac7e2f5b633ac30a5ed5fa1ced1e74acfc19acecea","urls":["bzz-raw://6c84e822f87cbdc4082533b626667b6928715bb2b1e8e7eb96954cebb9e38c8d","dweb:/ipfs/QmZmy9dgxLTerBAQDuuHqbL6EpgRxddqgv5KmwpXYVbKz1"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/math/SafeCast.sol":{"keccak256":"0x195533c86d0ef72bcc06456a4f66a9b941f38eb403739b00f21fd7c1abd1ae54","urls":["bzz-raw://b1d578337048cad08c1c03041cca5978eff5428aa130c781b271ad9e5566e1f8","dweb:/ipfs/QmPFKL2r9CBsMwmUqqdcFPfHZB2qcs9g1HDrPxzWSxomvy"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/types/Time.sol":{"keccak256":"0x36776530f012618bc7526ceb28e77b85e582cb12d9b9466a71d4bd6bf952e4cc","urls":["bzz-raw://9f867d046908497287d8a67643dd5d7e38c4027af4ab0a74ffbe1d6790c383c6","dweb:/ipfs/QmQ7s9gMP1nkwThFmoDifnGgpUMsMe5q5ZrAxGDsNnRGza"],"license":"MIT"},"packages/diamonds/interfaces/IAccessControl.sol":{"keccak256":"0xd44a9cecc8fbdc3ceef274a0a9fe061641569a684b2b0af3ad8f9f371c147f00","urls":["bzz-raw://afe2b4fa832bd406b3f0dc59c3b5ddc5c8eac66524b4fe2f8dce3fa7e480a0a5","dweb:/ipfs/QmeYi6MttygfszQ5iXvHARFwpy7MqfqxTBisD6opNimf8W"],"license":"BUSL-1.1"},"packages/diamonds/interfaces/IFacetIntrospection.sol":{"keccak256":"0x20b90272b83e14e26320d8f062c17cee50fd9531b1cc35d5f763517e717774c3","urls":["bzz-raw://2f09a6a6d80b942188cfbad1b83964d4be5de525bc1c3f8c2df5412718782cb4","dweb:/ipfs/QmbFSp5aBWsuTmZqs7L7dkHrfCVe6kWZuheBo9Cu99Ci6t"],"license":"BUSL-1.1"},"packages/diamonds/src/AccessControl.sol":{"keccak256":"0x57b1248e63762c09e53a78558cfbf24c6cdf7c4946f236e1026d3a188ef931c1","urls":["bzz-raw://7acd085dea00f018f3570149801e411d56d398ee386bf34700070c5dfcbe5153","dweb:/ipfs/QmPTd8QcEoyrzLGUFHyn7ow19XXFRSsGWJ9XSiMYYeaatv"],"license":"BUSL-1.1"},"packages/tokens/interfaces/token/IToken.sol":{"keccak256":"0x40f9963ee767737a8e79e02e304525c7d2b96edfde932ca0cfc6afe8b7db0d00","urls":["bzz-raw://d60c51dcafae97b5d632f76164c64346ee8349085d4e15ba2a8531e5f2f1c830","dweb:/ipfs/Qmc2t4g3KtmfZqRa6XpW6V4qD7afCedXfXpP1znTM2cpEy"],"license":"BUSL-1.1"},"packages/wallets/interfaces/capital/IAssetDisposal.sol":{"keccak256":"0xc4ca7cef4699bc97ffd95b0a6079ec25175473ffe11e06993603fe0b19a7c744","urls":["bzz-raw://b82672108e5ca3bade97206492948eee1fc7f4e05084f6681782cacf04ab039c","dweb:/ipfs/QmebgMzZAuFHWUHbygHNw64H5rW5ydW14ibHnk1gjNkspQ"],"license":"BUSL-1.1"},"packages/wallets/src/facets/capital/AssetDisposalFacet.sol":{"keccak256":"0x3819bd04006a8627100fdc0bfba10ea7d145e94946ec1ecda9c804effe0e259b","urls":["bzz-raw://1a0ef8d00ca9af6d085ee0a1b5d7f9f4b8393d24b9798d8d7b3dc2692465a077","dweb:/ipfs/QmdXoKk8uFWeiHW9hZxNdf9qACLKNzmQeeri4nmBLkJEkN"],"license":"BUSL-1.1"}},"version":1},"id":345}